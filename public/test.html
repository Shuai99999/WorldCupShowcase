<!DOCTYPE html>
<html>
<head>
  <title>Test Page</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    .info { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .error { background: #fee; color: #c00; padding: 15px; margin: 10px 0; border-radius: 5px; }
    .success { background: #efe; color: #0c0; padding: 15px; margin: 10px 0; border-radius: 5px; }
    code { background: #f0f0f0; padding: 2px 6px; border-radius: 3px; }
  </style>
</head>
<body>
  <h1>GitHub Pages 诊断页面</h1>
  
  <div class="info">
    <h3>当前URL信息</h3>
    <p><strong>完整URL:</strong> <span id="full-url"></span></p>
    <p><strong>路径:</strong> <span id="path"></span></p>
    <p><strong>推测的仓库名:</strong> <span id="repo-name"></span></p>
    <p><strong>应该的base路径:</strong> <code id="base-path"></code></p>
  </div>
  
  <div class="info">
    <h3>资源检查</h3>
    <p id="assets-check">检查中...</p>
  </div>
  
  <div class="info">
    <h3>修复建议</h3>
    <p id="suggestion"></p>
  </div>
  
  <script>
    const url = window.location.href;
    const path = window.location.pathname;
    const pathParts = path.split('/').filter(Boolean);
    const repoName = pathParts[0] || 'WorldCupShowcase';
    const basePath = repoName ? '/' + repoName + '/' : '/';
    
    document.getElementById('full-url').textContent = url;
    document.getElementById('path').textContent = path;
    document.getElementById('repo-name').textContent = repoName || '无法确定';
    document.getElementById('base-path').textContent = basePath;
    
    // 检查资源
    const assetsPath = basePath + 'assets/';
    document.getElementById('assets-check').innerHTML = 
      'Assets应该位于: <code>' + assetsPath + '</code><br>' +
      '如果JS文件404，说明base路径配置不正确。';
    
    // 修复建议
    if (repoName && repoName !== 'WorldCupShowcase') {
      document.getElementById('suggestion').innerHTML = 
        '你的仓库名是 <code>' + repoName + '</code>，请在 <code>vite.config.js</code> 中设置:<br>' +
        '<code>base: \'/' + repoName + '/\'</code>';
    } else {
      document.getElementById('suggestion').innerHTML = 
        '如果仓库名是 <code>WorldCupShowcase</code>，base路径应该是 <code>/WorldCupShowcase/</code>。<br>' +
        '请检查 <code>vite.config.js</code> 和 GitHub Actions 的配置。';
    }
    
    console.log('Repo name:', repoName);
    console.log('Base path should be:', basePath);
  </script>
</body>
</html>

